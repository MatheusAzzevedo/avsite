<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<title id="pageTitle">Avoar Turismo</title>
<!-- Stylesheets -->
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/style.css" rel="stylesheet">
<link href="css/avoar-top-header.css" rel="stylesheet">
<link rel="shortcut icon" href="images/favicon%20avoar.png" type="image/png">
<link rel="icon" href="images/favicon%20avoar.png" type="image/png">
<!-- Responsive -->
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<link href="css/responsive.css" rel="stylesheet">
<!--[if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script><![endif]--> 

</head>

<body>
  <div class="site-container">
    <div class="cursor"></div>
    <!-- Preloader -->
    <div class="preloader"></div>

    <a href="https://wa.me/553125147884" class="whatsapp-float" target="_blank" rel="noopener" aria-label="Fale conosco no WhatsApp"><span class="fab fa-whatsapp"></span></a>

    <div class="menu-backdrop"></div>

    <!-- Top Header (Desktop Only) - Novo header do site -->
    <header class="avoar-top-header">
        <div class="header-logo">
            <a href="/"><img src="images/Logo Branca.png" alt="Avoar Turismo"></a>
        </div>
        <nav class="header-nav">
            <a href="/">Início</a>
            <a href="/biologia-marinha">Biologia Marinha</a>
            <a href="/excursoes">Excursões</a>
            <a href="/sobre-nos">Sobre Nós</a>
            <a href="/blog" class="active">Blog</a>
            <a href="/contato">Contato</a>
        </nav>
        <div class="header-login">
            <a href="/admin/login.html" class="btn-administrativo">Administrativo</a>
            <span class="btn-login">Login</span>
        </div>
    </header>
    <!--End Top Header-->

    <!-- Main Header Bar-->
    <header class="main-header-bar">
        <div class="line-one"></div>
        <div class="line-two"></div>
        <!--Header-Upper-->
        <div class="header-bar-inner">
            <div class="outer-box clearfix">
                
                <!--Nav Toggler-->
                <div class="nav-toggler"><button class="toggler-btn"><span class="bar bar-one"></span><span class="bar bar-two"></span><span class="bar bar-three"></span></button></div>
                
                <!--Social Links-->
                <div class="social-links">
                    <ul class="clearfix">
                        <li><a href="#"><span class="fab fa-instagram"></span></a></li>
                        <li><a href="#"><span class="fab fa-twitter-square"></span></a></li>
                        <li><a href="#"><span class="fab fa-facebook-square"></span></a></li>
                    </ul>
                </div>
                
                <!--Copyright Text-->
                <div class="copyright">&copy; Avorar Turismo 2026</div>
            </div>

            <!--Alt Logo Box-->
            <div class="alt-logo-box"><a href="/"><img src="images/Logo Branca.png" alt="Avorar Turismo"></a></div>
            
            <!--Nav Bg Box-->
            <div class="nav-bg-box"></div>
            
            <!--Main Nav Outer-->
            <div class="main-nav-outer">
                <div class="nav-closer"><img src="images/icons/close-icon.png" alt=""></div>
                <div class="outer-nav-box">
                    <div class="top-bg"></div>
                    <div class="bottom-bg"></div>
                    <div class="main-nav-box" data-scrollbar="">
                        <!--Logo Box-->
                        <div class="main-logo-box"><a href="/"><img src="images/Logo Branca.png" alt="Avorar Turismo"></a></div>
                        <div class="main-nav">
                            <ul class="navigation">
                                <li><a href="/">Início</a></li>
                                <li><a href="/biologia-marinha">Projeto Biologia Marinha</a></li>
                                <li class="menu-item-hidden"><a href="portfolio.html">Excursões</a></li>
                                <li><a href="/sobre-nos">Sobre Nós</a></li>
                                <li class="menu-item-hidden"><a href="blog.html">Blog</a></li>
                                <li><a href="/contato">Contato</a></li>
                                <li><a href="/admin/login.html">Administrativo</a></li>
                                <li><span style="opacity: 0.7; cursor: default;">Login</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--End Header Upper-->
    </header>
    <!--End Main Header -->

    <div class="scroll-container">
        <div class="main-content-container" id="scroll-container">
            <div class="body-bg-layer" style="background-image: url(images/Imagens%20para%20o%20site/IMG-20250517-WA0071.jpg);"></div>
            <!-- Page Title -->
            <section class="page-title" id="to-top-div">
                <div class="auto-container">
                    <h1><span>Blog</span></h1>
                    <div class="bread-crumb">
                        <ul class="clearfix">
                            <li><a href="/">Início</a></li>
                            <li><a href="blog.html">Blog</a></li>
                            <li class="current" id="breadcrumbTitle">Carregando...</li>
                        </ul>
                    </div>
                </div>
            </section>
            <!--End Banner Section -->

            <!--Sidebar Page-->
            <div class="sidebar-page-container">
                <div class="auto-container">
                    <div class="row clearfix">
                        <!--Content Side-->
                        <div class="content-side col-lg-8 col-md-12 col-sm-12">
                            <div class="content-inner">
                                <!-- Loading State -->
                                <div id="loadingState" style="text-align: center; padding: 3rem;">
                                    <p style="color: #888;">Carregando post...</p>
                                </div>

                                <!-- Post Content (hidden initially) -->
                                <div class="blog-details" id="postContent" style="display: none;">
                                    <div class="image-box">
                                        <img id="postImage" src="images/Imagens%20para%20o%20site/IMG-20250910-WA0091.jpg" alt="">
                                    </div>
                                    <div class="lower">
                                        <h3 id="postTitle">Título do Post</h3>
                                        <div class="info">
                                            <div class="cat i-block"><i class="far fa-folder"></i> <span id="postCategory">categoria</span></div>
                                            <div class="time i-block"><i class="far fa-clock"></i> <span id="postDate">data</span></div>
                                            <div class="author i-block"><i class="far fa-user"></i> <span id="postAuthor">autor</span></div>
                                        </div>
                                        <div class="text-content text" id="postBody">
                                            <!-- Conteúdo do post será inserido aqui -->
                                        </div>

                                        <div class="post-tags" id="postTags" style="display: none;">
                                            <span class="ttl">Tags:</span>
                                            <span id="tagsContainer"></span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Error State -->
                                <div id="errorState" style="display: none; text-align: center; padding: 3rem;">
                                    <h3 style="color: #888;">Post não encontrado</h3>
                                    <p style="color: #666;">O post que você procura não existe ou foi removido.</p>
                                    <a href="blog.html" style="color: #ff5c00; text-decoration: none;">
                                        <i class="fas fa-arrow-left"></i> Voltar ao Blog
                                    </a>
                                </div>

                                <!-- Author Box -->
                                <div class="post-author" id="authorBox" style="display: none;">
                                    <div class="inner-box">
                                        <div class="inner">
                                            <div class="image"><img src="images/Imagens%20para%20o%20site/IMG-20250910-WA0092.jpg" alt=""></div>
                                            <h5>Sobre o autor</h5>
                                            <div class="text" id="authorName">Administrador da Avorar Turismo, apaixonado por viagens e aventuras.</div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <!--Sidebar Side-->
                        <div class="sidebar-side col-lg-4 col-md-12 col-sm-12">
                            <div class="sidebar">
                                <div class="sidebar-widget recent-post">
                                    <div class="sidebar-title"><h5><span>Posts Recentes</span></h5></div>
                                    <div class="posts" id="recentPosts">
                                        <!-- Posts recentes serão carregados dinamicamente -->
                                    </div>
                                </div>
                                <div class="sidebar-widget cat-widget">
                                    <div class="sidebar-title"><h5><span>Categorias</span></h5></div>
                                    <div class="categories">
                                        <ul>
                                            <li><a href="blog.html">Turismo</a></li>
                                            <li><a href="blog.html">Aventura</a></li>
                                            <li><a href="blog.html">Gastronomia</a></li>
                                            <li><a href="blog.html">Cultura</a></li>
                                            <li><a href="blog.html">Natureza</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

</div>
<!--End Site Container--> 

<!-- Script do gerenciador de dados -->
<script src="js/api-client.js"></script>
<script src="js/jquery.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.fancybox.js"></script>
<script src="js/smooth-scrollbar.js"></script>
<script src="js/owl.js"></script>
<script src="js/cursor-script.js"></script>
<script src="js/wow.js"></script>
<script src="js/custom-script.js"></script>
<script>
/**
 * Explicação da função [loadPost]
 * Carrega um post específico baseado no slug da URL.
 * Exibe mensagem de erro se o post não for encontrado.
 */
function loadPost() {
    console.log('[Blog Single] Carregando post...');
    
    // Aguarda o DataManager estar disponível
    if (typeof BlogManager === 'undefined') {
        setTimeout(loadPost, 100);
        return;
    }

    // Pega o slug da URL
    const urlParams = new URLSearchParams(window.location.search);
    const slug = urlParams.get('slug');

    const loadingState = document.getElementById('loadingState');
    const postContent = document.getElementById('postContent');
    const errorState = document.getElementById('errorState');
    const authorBox = document.getElementById('authorBox');

    if (!slug) {
        loadingState.style.display = 'none';
        errorState.style.display = 'block';
        return;
    }

    // Busca o post pelo slug
    const post = BlogManager.getBySlug(slug);

    if (!post || post.status !== 'publicado') {
        loadingState.style.display = 'none';
        errorState.style.display = 'block';
        return;
    }

    // Preenche os dados do post
    document.getElementById('pageTitle').textContent = `${post.titulo} - Avorar Turismo`;
    document.getElementById('breadcrumbTitle').textContent = post.titulo;
    document.getElementById('postTitle').textContent = post.titulo;
    document.getElementById('postCategory').textContent = capitalizeFirst(post.categoria);
    document.getElementById('postDate').textContent = formatDate(post.data);
    document.getElementById('postAuthor').textContent = post.autor;
    document.getElementById('postBody').innerHTML = post.conteudo;

    // Imagem
    if (post.imagemCapa) {
        document.getElementById('postImage').src = post.imagemCapa;
        document.getElementById('postImage').alt = post.titulo;
    }

    // Tags
    if (post.tags && post.tags.length > 0) {
        document.getElementById('postTags').style.display = 'block';
        document.getElementById('tagsContainer').innerHTML = post.tags
            .map(tag => `<a href="blog.html">${escapeHtml(tag)}</a>`)
            .join(', &ensp; ');
    }

    // Exibe o conteúdo
    loadingState.style.display = 'none';
    postContent.style.display = 'block';
    authorBox.style.display = 'block';

    // Carrega posts recentes
    loadRecentPosts(post.id);
}

/**
 * Explicação da função [loadRecentPosts]
 * Carrega os posts recentes para a sidebar.
 * @param {string} excludeId - ID do post atual para excluir da lista
 */
function loadRecentPosts(excludeId) {
    const posts = BlogManager.getAll(true)
        .filter(p => p.id !== excludeId)
        .slice(0, 3);

    const container = document.getElementById('recentPosts');

    if (posts.length === 0) {
        container.innerHTML = '<p style="color: #888; text-align: center;">Nenhum outro post disponível</p>';
        return;
    }

    container.innerHTML = posts.map(post => {
        const image = post.imagemCapa || 'images/Imagens%20para%20o%20site/IMG-20250910-WA0091.jpg';
        const date = formatDate(post.data);
        
        return `
            <div class="post">
                <div class="inner">
                    <div class="image">
                        <a href="blog-single.html?slug=${post.slug}">
                            <img src="${image}" alt="${escapeHtml(post.titulo)}" onerror="this.src='images/Imagens%20para%20o%20site/IMG-20250910-WA0091.jpg'" style="width: 80px; height: 60px; object-fit: cover;">
                        </a>
                    </div>
                    <div class="date"><span>${date}</span></div>
                    <div class="text"><a href="blog-single.html?slug=${post.slug}">${escapeHtml(post.titulo)}</a></div>
                </div>
            </div>
        `;
    }).join('');
}

/**
 * Explicação da função [formatDate]
 * Formata uma data para exibição.
 */
function formatDate(dateString) {
    const date = new Date(dateString);
    const day = String(date.getDate()).padStart(2, '0');
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const year = date.getFullYear();
    return `${day}/${month}/${year}`;
}

/**
 * Explicação da função [capitalizeFirst]
 * Capitaliza a primeira letra de uma string.
 */
function capitalizeFirst(str) {
    if (!str) return '';
    return str.charAt(0).toUpperCase() + str.slice(1);
}

/**
 * Explicação da função [escapeHtml]
 * Escapa caracteres HTML para prevenir XSS.
 */
function escapeHtml(text) {
    if (!text) return '';
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}

// Carrega o post quando o DOM estiver pronto
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(loadPost, 200);
});
</script>
</body>
</html>
